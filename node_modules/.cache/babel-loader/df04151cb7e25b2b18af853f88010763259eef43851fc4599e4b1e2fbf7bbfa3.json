{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Path = void 0;\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Path = function (_super) {\n  __extends(Path, _super);\n  function Path(config) {\n    var _this = _super.call(this, config) || this;\n    _this.dataArray = [];\n    _this.pathLength = 0;\n    _this.dataArray = Path.parsePathData(_this.data());\n    _this.pathLength = 0;\n    for (var i = 0; i < _this.dataArray.length; ++i) {\n      _this.pathLength += _this.dataArray[i].pathLength;\n    }\n    _this.on('dataChange.konva', function () {\n      this.dataArray = Path.parsePathData(this.data());\n      this.pathLength = 0;\n      for (var i = 0; i < this.dataArray.length; ++i) {\n        this.pathLength += this.dataArray[i].pathLength;\n      }\n    });\n    return _this;\n  }\n  Path.prototype._sceneFunc = function (context) {\n    var ca = this.dataArray;\n    context.beginPath();\n    var isClosed = false;\n    for (var n = 0; n < ca.length; n++) {\n      var c = ca[n].command;\n      var p = ca[n].points;\n      switch (c) {\n        case 'L':\n          context.lineTo(p[0], p[1]);\n          break;\n        case 'M':\n          context.moveTo(p[0], p[1]);\n          break;\n        case 'C':\n          context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n          break;\n        case 'Q':\n          context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n          break;\n        case 'A':\n          var cx = p[0],\n            cy = p[1],\n            rx = p[2],\n            ry = p[3],\n            theta = p[4],\n            dTheta = p[5],\n            psi = p[6],\n            fs = p[7];\n          var r = rx > ry ? rx : ry;\n          var scaleX = rx > ry ? 1 : rx / ry;\n          var scaleY = rx > ry ? ry / rx : 1;\n          context.translate(cx, cy);\n          context.rotate(psi);\n          context.scale(scaleX, scaleY);\n          context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n          context.scale(1 / scaleX, 1 / scaleY);\n          context.rotate(-psi);\n          context.translate(-cx, -cy);\n          break;\n        case 'z':\n          isClosed = true;\n          context.closePath();\n          break;\n      }\n    }\n    if (!isClosed && !this.hasFill()) {\n      context.strokeShape(this);\n    } else {\n      context.fillStrokeShape(this);\n    }\n  };\n  Path.prototype.getSelfRect = function () {\n    var points = [];\n    this.dataArray.forEach(function (data) {\n      if (data.command === 'A') {\n        var start = data.points[4];\n        var dTheta = data.points[5];\n        var end = data.points[4] + dTheta;\n        var inc = Math.PI / 180.0;\n        if (Math.abs(start - end) < inc) {\n          inc = Math.abs(start - end);\n        }\n        if (dTheta < 0) {\n          for (var t = start - inc; t > end; t -= inc) {\n            var point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n            points.push(point.x, point.y);\n          }\n        } else {\n          for (var t = start + inc; t < end; t += inc) {\n            var point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n            points.push(point.x, point.y);\n          }\n        }\n      } else if (data.command === 'C') {\n        for (var t = 0.0; t <= 1; t += 0.01) {\n          var point = Path.getPointOnCubicBezier(t, data.start.x, data.start.y, data.points[0], data.points[1], data.points[2], data.points[3], data.points[4], data.points[5]);\n          points.push(point.x, point.y);\n        }\n      } else {\n        points = points.concat(data.points);\n      }\n    });\n    var minX = points[0];\n    var maxX = points[0];\n    var minY = points[1];\n    var maxY = points[1];\n    var x, y;\n    for (var i = 0; i < points.length / 2; i++) {\n      x = points[i * 2];\n      y = points[i * 2 + 1];\n      if (!isNaN(x)) {\n        minX = Math.min(minX, x);\n        maxX = Math.max(maxX, x);\n      }\n      if (!isNaN(y)) {\n        minY = Math.min(minY, y);\n        maxY = Math.max(maxY, y);\n      }\n    }\n    return {\n      x: Math.round(minX),\n      y: Math.round(minY),\n      width: Math.round(maxX - minX),\n      height: Math.round(maxY - minY)\n    };\n  };\n  Path.prototype.getLength = function () {\n    return this.pathLength;\n  };\n  Path.prototype.getPointAtLength = function (length) {\n    var point,\n      i = 0,\n      ii = this.dataArray.length;\n    if (!ii) {\n      return null;\n    }\n    while (i < ii && length > this.dataArray[i].pathLength) {\n      length -= this.dataArray[i].pathLength;\n      ++i;\n    }\n    if (i === ii) {\n      point = this.dataArray[i - 1].points.slice(-2);\n      return {\n        x: point[0],\n        y: point[1]\n      };\n    }\n    if (length < 0.01) {\n      point = this.dataArray[i].points.slice(0, 2);\n      return {\n        x: point[0],\n        y: point[1]\n      };\n    }\n    var cp = this.dataArray[i];\n    var p = cp.points;\n    switch (cp.command) {\n      case 'L':\n        return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n      case 'C':\n        return Path.getPointOnCubicBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n      case 'Q':\n        return Path.getPointOnQuadraticBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n      case 'A':\n        var cx = p[0],\n          cy = p[1],\n          rx = p[2],\n          ry = p[3],\n          theta = p[4],\n          dTheta = p[5],\n          psi = p[6];\n        theta += dTheta * length / cp.pathLength;\n        return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n    }\n    return null;\n  };\n  Path.getLineLength = function (x1, y1, x2, y2) {\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  };\n  Path.getPointOnLine = function (dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n    if (fromX === undefined) {\n      fromX = P1x;\n    }\n    if (fromY === undefined) {\n      fromY = P1y;\n    }\n    var m = (P2y - P1y) / (P2x - P1x + 0.00000001);\n    var run = Math.sqrt(dist * dist / (1 + m * m));\n    if (P2x < P1x) {\n      run *= -1;\n    }\n    var rise = m * run;\n    var pt;\n    if (P2x === P1x) {\n      pt = {\n        x: fromX,\n        y: fromY + rise\n      };\n    } else if ((fromY - P1y) / (fromX - P1x + 0.00000001) === m) {\n      pt = {\n        x: fromX + run,\n        y: fromY + rise\n      };\n    } else {\n      var ix, iy;\n      var len = this.getLineLength(P1x, P1y, P2x, P2y);\n      var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n      u = u / (len * len);\n      ix = P1x + u * (P2x - P1x);\n      iy = P1y + u * (P2y - P1y);\n      var pRise = this.getLineLength(fromX, fromY, ix, iy);\n      var pRun = Math.sqrt(dist * dist - pRise * pRise);\n      run = Math.sqrt(pRun * pRun / (1 + m * m));\n      if (P2x < P1x) {\n        run *= -1;\n      }\n      rise = m * run;\n      pt = {\n        x: ix + run,\n        y: iy + rise\n      };\n    }\n    return pt;\n  };\n  Path.getPointOnCubicBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n    function CB1(t) {\n      return t * t * t;\n    }\n    function CB2(t) {\n      return 3 * t * t * (1 - t);\n    }\n    function CB3(t) {\n      return 3 * t * (1 - t) * (1 - t);\n    }\n    function CB4(t) {\n      return (1 - t) * (1 - t) * (1 - t);\n    }\n    var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n    var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n    return {\n      x: x,\n      y: y\n    };\n  };\n  Path.getPointOnQuadraticBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n    function QB1(t) {\n      return t * t;\n    }\n    function QB2(t) {\n      return 2 * t * (1 - t);\n    }\n    function QB3(t) {\n      return (1 - t) * (1 - t);\n    }\n    var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n    var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n    return {\n      x: x,\n      y: y\n    };\n  };\n  Path.getPointOnEllipticalArc = function (cx, cy, rx, ry, theta, psi) {\n    var cosPsi = Math.cos(psi),\n      sinPsi = Math.sin(psi);\n    var pt = {\n      x: rx * Math.cos(theta),\n      y: ry * Math.sin(theta)\n    };\n    return {\n      x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n      y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n    };\n  };\n  Path.parsePathData = function (data) {\n    if (!data) {\n      return [];\n    }\n    var cs = data;\n    var cc = ['m', 'M', 'l', 'L', 'v', 'V', 'h', 'H', 'z', 'Z', 'c', 'C', 'q', 'Q', 't', 'T', 's', 'S', 'a', 'A'];\n    cs = cs.replace(new RegExp(' ', 'g'), ',');\n    for (var n = 0; n < cc.length; n++) {\n      cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n    }\n    var arr = cs.split('|');\n    var ca = [];\n    var coords = [];\n    var cpx = 0;\n    var cpy = 0;\n    var re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n    var match;\n    for (n = 1; n < arr.length; n++) {\n      var str = arr[n];\n      var c = str.charAt(0);\n      str = str.slice(1);\n      coords.length = 0;\n      while (match = re.exec(str)) {\n        coords.push(match[0]);\n      }\n      var p = [];\n      for (var j = 0, jlen = coords.length; j < jlen; j++) {\n        var parsed = parseFloat(coords[j]);\n        if (!isNaN(parsed)) {\n          p.push(parsed);\n        } else {\n          p.push(0);\n        }\n      }\n      while (p.length > 0) {\n        if (isNaN(p[0])) {\n          break;\n        }\n        var cmd = null;\n        var points = [];\n        var startX = cpx,\n          startY = cpy;\n        var prevCmd, ctlPtx, ctlPty;\n        var rx, ry, psi, fa, fs, x1, y1;\n        switch (c) {\n          case 'l':\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n          case 'L':\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n          case 'm':\n            var dx = p.shift();\n            var dy = p.shift();\n            cpx += dx;\n            cpy += dy;\n            cmd = 'M';\n            if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n              for (var idx = ca.length - 2; idx >= 0; idx--) {\n                if (ca[idx].command === 'M') {\n                  cpx = ca[idx].points[0] + dx;\n                  cpy = ca[idx].points[1] + dy;\n                  break;\n                }\n              }\n            }\n            points.push(cpx, cpy);\n            c = 'l';\n            break;\n          case 'M':\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'M';\n            points.push(cpx, cpy);\n            c = 'L';\n            break;\n          case 'h':\n            cpx += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n          case 'H':\n            cpx = p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n          case 'v':\n            cpy += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n          case 'V':\n            cpy = p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n          case 'C':\n            points.push(p.shift(), p.shift(), p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n          case 'c':\n            points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n          case 'S':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n            if (prevCmd.command === 'C') {\n              ctlPtx = cpx + (cpx - prevCmd.points[2]);\n              ctlPty = cpy + (cpy - prevCmd.points[3]);\n            }\n            points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n          case 's':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n            if (prevCmd.command === 'C') {\n              ctlPtx = cpx + (cpx - prevCmd.points[2]);\n              ctlPty = cpy + (cpy - prevCmd.points[3]);\n            }\n            points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n          case 'Q':\n            points.push(p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n          case 'q':\n            points.push(cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'Q';\n            points.push(cpx, cpy);\n            break;\n          case 'T':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n            if (prevCmd.command === 'Q') {\n              ctlPtx = cpx + (cpx - prevCmd.points[0]);\n              ctlPty = cpy + (cpy - prevCmd.points[1]);\n            }\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'Q';\n            points.push(ctlPtx, ctlPty, cpx, cpy);\n            break;\n          case 't':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n            if (prevCmd.command === 'Q') {\n              ctlPtx = cpx + (cpx - prevCmd.points[0]);\n              ctlPty = cpy + (cpy - prevCmd.points[1]);\n            }\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'Q';\n            points.push(ctlPtx, ctlPty, cpx, cpy);\n            break;\n          case 'A':\n            rx = p.shift();\n            ry = p.shift();\n            psi = p.shift();\n            fa = p.shift();\n            fs = p.shift();\n            x1 = cpx;\n            y1 = cpy;\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'A';\n            points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n            break;\n          case 'a':\n            rx = p.shift();\n            ry = p.shift();\n            psi = p.shift();\n            fa = p.shift();\n            fs = p.shift();\n            x1 = cpx;\n            y1 = cpy;\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'A';\n            points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n            break;\n        }\n        ca.push({\n          command: cmd || c,\n          points: points,\n          start: {\n            x: startX,\n            y: startY\n          },\n          pathLength: this.calcLength(startX, startY, cmd || c, points)\n        });\n      }\n      if (c === 'z' || c === 'Z') {\n        ca.push({\n          command: 'z',\n          points: [],\n          start: undefined,\n          pathLength: 0\n        });\n      }\n    }\n    return ca;\n  };\n  Path.calcLength = function (x, y, cmd, points) {\n    var len, p1, p2, t;\n    var path = Path;\n    switch (cmd) {\n      case 'L':\n        return path.getLineLength(x, y, points[0], points[1]);\n      case 'C':\n        len = 0.0;\n        p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n          len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n        return len;\n      case 'Q':\n        len = 0.0;\n        p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n          len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n        return len;\n      case 'A':\n        len = 0.0;\n        var start = points[4];\n        var dTheta = points[5];\n        var end = points[4] + dTheta;\n        var inc = Math.PI / 180.0;\n        if (Math.abs(start - end) < inc) {\n          inc = Math.abs(start - end);\n        }\n        p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n        if (dTheta < 0) {\n          for (t = start - inc; t > end; t -= inc) {\n            p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n            len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n        } else {\n          for (t = start + inc; t < end; t += inc) {\n            p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n            len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n        }\n        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n        return len;\n    }\n    return 0;\n  };\n  Path.convertEndpointToCenterParameterization = function (x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n    var psi = psiDeg * (Math.PI / 180.0);\n    var xp = Math.cos(psi) * (x1 - x2) / 2.0 + Math.sin(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * Math.sin(psi) * (x1 - x2) / 2.0 + Math.cos(psi) * (y1 - y2) / 2.0;\n    var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n    if (lambda > 1) {\n      rx *= Math.sqrt(lambda);\n      ry *= Math.sqrt(lambda);\n    }\n    var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n    if (fa === fs) {\n      f *= -1;\n    }\n    if (isNaN(f)) {\n      f = 0;\n    }\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n    var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n    var vMag = function (v) {\n      return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n    };\n    var vRatio = function (u, v) {\n      return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n    };\n    var vAngle = function (u, v) {\n      return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n    };\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n    if (vRatio(u, v) <= -1) {\n      dTheta = Math.PI;\n    }\n    if (vRatio(u, v) >= 1) {\n      dTheta = 0;\n    }\n    if (fs === 0 && dTheta > 0) {\n      dTheta = dTheta - 2 * Math.PI;\n    }\n    if (fs === 1 && dTheta < 0) {\n      dTheta = dTheta + 2 * Math.PI;\n    }\n    return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n  };\n  return Path;\n}(Shape_1.Shape);\nexports.Path = Path;\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\nGlobal_1._registerNode(Path);\nFactory_1.Factory.addGetterSetter(Path, 'data');\nUtil_1.Collection.mapMethods(Path);","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__","constructor","create","defineProperty","exports","value","Path","Util_1","require","Factory_1","Shape_1","Global_1","_super","config","_this","dataArray","pathLength","parsePathData","data","i","length","on","_sceneFunc","context","ca","beginPath","isClosed","n","c","command","points","lineTo","moveTo","bezierCurveTo","quadraticCurveTo","cx","cy","rx","ry","theta","dTheta","psi","fs","r","scaleX","scaleY","translate","rotate","scale","arc","closePath","hasFill","strokeShape","fillStrokeShape","getSelfRect","forEach","start","end","inc","Math","PI","abs","t","point","getPointOnEllipticalArc","push","x","y","getPointOnCubicBezier","concat","minX","maxX","minY","maxY","isNaN","min","max","round","width","height","getLength","getPointAtLength","ii","slice","cp","getPointOnLine","getPointOnQuadraticBezier","getLineLength","x1","y1","x2","y2","sqrt","dist","P1x","P1y","P2x","P2y","fromX","fromY","undefined","m","run","rise","pt","ix","iy","len","u","pRise","pRun","pct","P3x","P3y","P4x","P4y","CB1","CB2","CB3","CB4","QB1","QB2","QB3","cosPsi","cos","sinPsi","sin","cs","cc","replace","RegExp","arr","split","coords","cpx","cpy","re","match","str","charAt","exec","j","jlen","parsed","parseFloat","cmd","startX","startY","prevCmd","ctlPtx","ctlPty","fa","shift","dx","dy","idx","convertEndpointToCenterParameterization","calcLength","p1","p2","path","psiDeg","xp","yp","lambda","f","cxp","cyp","vMag","v","vRatio","vAngle","acos","Shape","className","_attrsAffectingSize","_registerNode","Factory","addGetterSetter","Collection","mapMethods"],"sources":["/Users/UX201446/Documents/GitHub/konva/node_modules/konva/lib/shapes/Path.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Path = void 0;\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Path = (function (_super) {\n    __extends(Path, _super);\n    function Path(config) {\n        var _this = _super.call(this, config) || this;\n        _this.dataArray = [];\n        _this.pathLength = 0;\n        _this.dataArray = Path.parsePathData(_this.data());\n        _this.pathLength = 0;\n        for (var i = 0; i < _this.dataArray.length; ++i) {\n            _this.pathLength += _this.dataArray[i].pathLength;\n        }\n        _this.on('dataChange.konva', function () {\n            this.dataArray = Path.parsePathData(this.data());\n            this.pathLength = 0;\n            for (var i = 0; i < this.dataArray.length; ++i) {\n                this.pathLength += this.dataArray[i].pathLength;\n            }\n        });\n        return _this;\n    }\n    Path.prototype._sceneFunc = function (context) {\n        var ca = this.dataArray;\n        context.beginPath();\n        var isClosed = false;\n        for (var n = 0; n < ca.length; n++) {\n            var c = ca[n].command;\n            var p = ca[n].points;\n            switch (c) {\n                case 'L':\n                    context.lineTo(p[0], p[1]);\n                    break;\n                case 'M':\n                    context.moveTo(p[0], p[1]);\n                    break;\n                case 'C':\n                    context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n                    break;\n                case 'Q':\n                    context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n                    break;\n                case 'A':\n                    var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6], fs = p[7];\n                    var r = rx > ry ? rx : ry;\n                    var scaleX = rx > ry ? 1 : rx / ry;\n                    var scaleY = rx > ry ? ry / rx : 1;\n                    context.translate(cx, cy);\n                    context.rotate(psi);\n                    context.scale(scaleX, scaleY);\n                    context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n                    context.scale(1 / scaleX, 1 / scaleY);\n                    context.rotate(-psi);\n                    context.translate(-cx, -cy);\n                    break;\n                case 'z':\n                    isClosed = true;\n                    context.closePath();\n                    break;\n            }\n        }\n        if (!isClosed && !this.hasFill()) {\n            context.strokeShape(this);\n        }\n        else {\n            context.fillStrokeShape(this);\n        }\n    };\n    Path.prototype.getSelfRect = function () {\n        var points = [];\n        this.dataArray.forEach(function (data) {\n            if (data.command === 'A') {\n                var start = data.points[4];\n                var dTheta = data.points[5];\n                var end = data.points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                if (dTheta < 0) {\n                    for (var t = start - inc; t > end; t -= inc) {\n                        var point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n                else {\n                    for (var t = start + inc; t < end; t += inc) {\n                        var point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n            }\n            else if (data.command === 'C') {\n                for (var t = 0.0; t <= 1; t += 0.01) {\n                    var point = Path.getPointOnCubicBezier(t, data.start.x, data.start.y, data.points[0], data.points[1], data.points[2], data.points[3], data.points[4], data.points[5]);\n                    points.push(point.x, point.y);\n                }\n            }\n            else {\n                points = points.concat(data.points);\n            }\n        });\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            if (!isNaN(x)) {\n                minX = Math.min(minX, x);\n                maxX = Math.max(maxX, x);\n            }\n            if (!isNaN(y)) {\n                minY = Math.min(minY, y);\n                maxY = Math.max(maxY, y);\n            }\n        }\n        return {\n            x: Math.round(minX),\n            y: Math.round(minY),\n            width: Math.round(maxX - minX),\n            height: Math.round(maxY - minY),\n        };\n    };\n    Path.prototype.getLength = function () {\n        return this.pathLength;\n    };\n    Path.prototype.getPointAtLength = function (length) {\n        var point, i = 0, ii = this.dataArray.length;\n        if (!ii) {\n            return null;\n        }\n        while (i < ii && length > this.dataArray[i].pathLength) {\n            length -= this.dataArray[i].pathLength;\n            ++i;\n        }\n        if (i === ii) {\n            point = this.dataArray[i - 1].points.slice(-2);\n            return {\n                x: point[0],\n                y: point[1],\n            };\n        }\n        if (length < 0.01) {\n            point = this.dataArray[i].points.slice(0, 2);\n            return {\n                x: point[0],\n                y: point[1],\n            };\n        }\n        var cp = this.dataArray[i];\n        var p = cp.points;\n        switch (cp.command) {\n            case 'L':\n                return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n            case 'C':\n                return Path.getPointOnCubicBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n            case 'Q':\n                return Path.getPointOnQuadraticBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n            case 'A':\n                var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6];\n                theta += (dTheta * length) / cp.pathLength;\n                return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n        }\n        return null;\n    };\n    Path.getLineLength = function (x1, y1, x2, y2) {\n        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    };\n    Path.getPointOnLine = function (dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n        if (fromX === undefined) {\n            fromX = P1x;\n        }\n        if (fromY === undefined) {\n            fromY = P1y;\n        }\n        var m = (P2y - P1y) / (P2x - P1x + 0.00000001);\n        var run = Math.sqrt((dist * dist) / (1 + m * m));\n        if (P2x < P1x) {\n            run *= -1;\n        }\n        var rise = m * run;\n        var pt;\n        if (P2x === P1x) {\n            pt = {\n                x: fromX,\n                y: fromY + rise,\n            };\n        }\n        else if ((fromY - P1y) / (fromX - P1x + 0.00000001) === m) {\n            pt = {\n                x: fromX + run,\n                y: fromY + rise,\n            };\n        }\n        else {\n            var ix, iy;\n            var len = this.getLineLength(P1x, P1y, P2x, P2y);\n            var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n            u = u / (len * len);\n            ix = P1x + u * (P2x - P1x);\n            iy = P1y + u * (P2y - P1y);\n            var pRise = this.getLineLength(fromX, fromY, ix, iy);\n            var pRun = Math.sqrt(dist * dist - pRise * pRise);\n            run = Math.sqrt((pRun * pRun) / (1 + m * m));\n            if (P2x < P1x) {\n                run *= -1;\n            }\n            rise = m * run;\n            pt = {\n                x: ix + run,\n                y: iy + rise,\n            };\n        }\n        return pt;\n    };\n    Path.getPointOnCubicBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n        function CB1(t) {\n            return t * t * t;\n        }\n        function CB2(t) {\n            return 3 * t * t * (1 - t);\n        }\n        function CB3(t) {\n            return 3 * t * (1 - t) * (1 - t);\n        }\n        function CB4(t) {\n            return (1 - t) * (1 - t) * (1 - t);\n        }\n        var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n        var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n        return {\n            x: x,\n            y: y,\n        };\n    };\n    Path.getPointOnQuadraticBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n        function QB1(t) {\n            return t * t;\n        }\n        function QB2(t) {\n            return 2 * t * (1 - t);\n        }\n        function QB3(t) {\n            return (1 - t) * (1 - t);\n        }\n        var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n        var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n        return {\n            x: x,\n            y: y,\n        };\n    };\n    Path.getPointOnEllipticalArc = function (cx, cy, rx, ry, theta, psi) {\n        var cosPsi = Math.cos(psi), sinPsi = Math.sin(psi);\n        var pt = {\n            x: rx * Math.cos(theta),\n            y: ry * Math.sin(theta),\n        };\n        return {\n            x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n            y: cy + (pt.x * sinPsi + pt.y * cosPsi),\n        };\n    };\n    Path.parsePathData = function (data) {\n        if (!data) {\n            return [];\n        }\n        var cs = data;\n        var cc = [\n            'm',\n            'M',\n            'l',\n            'L',\n            'v',\n            'V',\n            'h',\n            'H',\n            'z',\n            'Z',\n            'c',\n            'C',\n            'q',\n            'Q',\n            't',\n            'T',\n            's',\n            'S',\n            'a',\n            'A',\n        ];\n        cs = cs.replace(new RegExp(' ', 'g'), ',');\n        for (var n = 0; n < cc.length; n++) {\n            cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n        }\n        var arr = cs.split('|');\n        var ca = [];\n        var coords = [];\n        var cpx = 0;\n        var cpy = 0;\n        var re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n        var match;\n        for (n = 1; n < arr.length; n++) {\n            var str = arr[n];\n            var c = str.charAt(0);\n            str = str.slice(1);\n            coords.length = 0;\n            while ((match = re.exec(str))) {\n                coords.push(match[0]);\n            }\n            var p = [];\n            for (var j = 0, jlen = coords.length; j < jlen; j++) {\n                var parsed = parseFloat(coords[j]);\n                if (!isNaN(parsed)) {\n                    p.push(parsed);\n                }\n                else {\n                    p.push(0);\n                }\n            }\n            while (p.length > 0) {\n                if (isNaN(p[0])) {\n                    break;\n                }\n                var cmd = null;\n                var points = [];\n                var startX = cpx, startY = cpy;\n                var prevCmd, ctlPtx, ctlPty;\n                var rx, ry, psi, fa, fs, x1, y1;\n                switch (c) {\n                    case 'l':\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'L':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'm':\n                        var dx = p.shift();\n                        var dy = p.shift();\n                        cpx += dx;\n                        cpy += dy;\n                        cmd = 'M';\n                        if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n                            for (var idx = ca.length - 2; idx >= 0; idx--) {\n                                if (ca[idx].command === 'M') {\n                                    cpx = ca[idx].points[0] + dx;\n                                    cpy = ca[idx].points[1] + dy;\n                                    break;\n                                }\n                            }\n                        }\n                        points.push(cpx, cpy);\n                        c = 'l';\n                        break;\n                    case 'M':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'M';\n                        points.push(cpx, cpy);\n                        c = 'L';\n                        break;\n                    case 'h':\n                        cpx += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'H':\n                        cpx = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'v':\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'V':\n                        cpy = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'C':\n                        points.push(p.shift(), p.shift(), p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'c':\n                        points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'S':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 's':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'Q':\n                        points.push(p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'q':\n                        points.push(cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'T':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 't':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 'A':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                    case 'a':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                }\n                ca.push({\n                    command: cmd || c,\n                    points: points,\n                    start: {\n                        x: startX,\n                        y: startY,\n                    },\n                    pathLength: this.calcLength(startX, startY, cmd || c, points),\n                });\n            }\n            if (c === 'z' || c === 'Z') {\n                ca.push({\n                    command: 'z',\n                    points: [],\n                    start: undefined,\n                    pathLength: 0,\n                });\n            }\n        }\n        return ca;\n    };\n    Path.calcLength = function (x, y, cmd, points) {\n        var len, p1, p2, t;\n        var path = Path;\n        switch (cmd) {\n            case 'L':\n                return path.getLineLength(x, y, points[0], points[1]);\n            case 'C':\n                len = 0.0;\n                p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                for (t = 0.01; t <= 1; t += 0.01) {\n                    p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case 'Q':\n                len = 0.0;\n                p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n                for (t = 0.01; t <= 1; t += 0.01) {\n                    p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case 'A':\n                len = 0.0;\n                var start = points[4];\n                var dTheta = points[5];\n                var end = points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n                if (dTheta < 0) {\n                    for (t = start - inc; t > end; t -= inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                else {\n                    for (t = start + inc; t < end; t += inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                return len;\n        }\n        return 0;\n    };\n    Path.convertEndpointToCenterParameterization = function (x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n        var psi = psiDeg * (Math.PI / 180.0);\n        var xp = (Math.cos(psi) * (x1 - x2)) / 2.0 + (Math.sin(psi) * (y1 - y2)) / 2.0;\n        var yp = (-1 * Math.sin(psi) * (x1 - x2)) / 2.0 +\n            (Math.cos(psi) * (y1 - y2)) / 2.0;\n        var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n        if (lambda > 1) {\n            rx *= Math.sqrt(lambda);\n            ry *= Math.sqrt(lambda);\n        }\n        var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) /\n            (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n        if (fa === fs) {\n            f *= -1;\n        }\n        if (isNaN(f)) {\n            f = 0;\n        }\n        var cxp = (f * rx * yp) / ry;\n        var cyp = (f * -ry * xp) / rx;\n        var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n        var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n        var vMag = function (v) {\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n        };\n        var vRatio = function (u, v) {\n            return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n        };\n        var vAngle = function (u, v) {\n            return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n        };\n        var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n        var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n        var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n        var dTheta = vAngle(u, v);\n        if (vRatio(u, v) <= -1) {\n            dTheta = Math.PI;\n        }\n        if (vRatio(u, v) >= 1) {\n            dTheta = 0;\n        }\n        if (fs === 0 && dTheta > 0) {\n            dTheta = dTheta - 2 * Math.PI;\n        }\n        if (fs === 1 && dTheta < 0) {\n            dTheta = dTheta + 2 * Math.PI;\n        }\n        return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n    };\n    return Path;\n}(Shape_1.Shape));\nexports.Path = Path;\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\nGlobal_1._registerNode(Path);\nFactory_1.Factory.addGetterSetter(Path, 'data');\nUtil_1.Collection.mapMethods(Path);\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}