{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HitContext = exports.SceneContext = exports.Context = void 0;\nvar Util_1 = require(\"./Util\");\nvar Global_1 = require(\"./Global\");\nvar COMMA = ',',\n  OPEN_PAREN = '(',\n  CLOSE_PAREN = ')',\n  OPEN_PAREN_BRACKET = '([',\n  CLOSE_BRACKET_PAREN = '])',\n  SEMICOLON = ';',\n  DOUBLE_PAREN = '()',\n  EQUALS = '=',\n  CONTEXT_METHODS = ['arc', 'arcTo', 'beginPath', 'bezierCurveTo', 'clearRect', 'clip', 'closePath', 'createLinearGradient', 'createPattern', 'createRadialGradient', 'drawImage', 'ellipse', 'fill', 'fillText', 'getImageData', 'createImageData', 'lineTo', 'moveTo', 'putImageData', 'quadraticCurveTo', 'rect', 'restore', 'rotate', 'save', 'scale', 'setLineDash', 'setTransform', 'stroke', 'strokeText', 'transform', 'translate'];\nvar CONTEXT_PROPERTIES = ['fillStyle', 'strokeStyle', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'lineCap', 'lineDashOffset', 'lineJoin', 'lineWidth', 'miterLimit', 'font', 'textAlign', 'textBaseline', 'globalAlpha', 'globalCompositeOperation', 'imageSmoothingEnabled'];\nvar traceArrMax = 100;\nvar Context = function () {\n  function Context(canvas) {\n    this.canvas = canvas;\n    this._context = canvas._canvas.getContext('2d');\n    if (Global_1.Konva.enableTrace) {\n      this.traceArr = [];\n      this._enableTrace();\n    }\n  }\n  Context.prototype.fillShape = function (shape) {\n    if (shape.fillEnabled()) {\n      this._fill(shape);\n    }\n  };\n  Context.prototype._fill = function (shape) {};\n  Context.prototype.strokeShape = function (shape) {\n    if (shape.hasStroke()) {\n      this._stroke(shape);\n    }\n  };\n  Context.prototype._stroke = function (shape) {};\n  Context.prototype.fillStrokeShape = function (shape) {\n    if (shape.attrs.fillAfterStrokeEnabled) {\n      this.strokeShape(shape);\n      this.fillShape(shape);\n    } else {\n      this.fillShape(shape);\n      this.strokeShape(shape);\n    }\n  };\n  Context.prototype.getTrace = function (relaxed) {\n    var traceArr = this.traceArr,\n      len = traceArr.length,\n      str = '',\n      n,\n      trace,\n      method,\n      args;\n    for (n = 0; n < len; n++) {\n      trace = traceArr[n];\n      method = trace.method;\n      if (method) {\n        args = trace.args;\n        str += method;\n        if (relaxed) {\n          str += DOUBLE_PAREN;\n        } else {\n          if (Util_1.Util._isArray(args[0])) {\n            str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n          } else {\n            str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n          }\n        }\n      } else {\n        str += trace.property;\n        if (!relaxed) {\n          str += EQUALS + trace.val;\n        }\n      }\n      str += SEMICOLON;\n    }\n    return str;\n  };\n  Context.prototype.clearTrace = function () {\n    this.traceArr = [];\n  };\n  Context.prototype._trace = function (str) {\n    var traceArr = this.traceArr,\n      len;\n    traceArr.push(str);\n    len = traceArr.length;\n    if (len >= traceArrMax) {\n      traceArr.shift();\n    }\n  };\n  Context.prototype.reset = function () {\n    var pixelRatio = this.getCanvas().getPixelRatio();\n    this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n  };\n  Context.prototype.getCanvas = function () {\n    return this.canvas;\n  };\n  Context.prototype.clear = function (bounds) {\n    var canvas = this.getCanvas();\n    if (bounds) {\n      this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n    } else {\n      this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n    }\n  };\n  Context.prototype._applyLineCap = function (shape) {\n    var lineCap = shape.getLineCap();\n    if (lineCap) {\n      this.setAttr('lineCap', lineCap);\n    }\n  };\n  Context.prototype._applyOpacity = function (shape) {\n    var absOpacity = shape.getAbsoluteOpacity();\n    if (absOpacity !== 1) {\n      this.setAttr('globalAlpha', absOpacity);\n    }\n  };\n  Context.prototype._applyLineJoin = function (shape) {\n    var lineJoin = shape.attrs.lineJoin;\n    if (lineJoin) {\n      this.setAttr('lineJoin', lineJoin);\n    }\n  };\n  Context.prototype.setAttr = function (attr, val) {\n    this._context[attr] = val;\n  };\n  Context.prototype.arc = function (a0, a1, a2, a3, a4, a5) {\n    this._context.arc(a0, a1, a2, a3, a4, a5);\n  };\n  Context.prototype.arcTo = function (a0, a1, a2, a3, a4) {\n    this._context.arcTo(a0, a1, a2, a3, a4);\n  };\n  Context.prototype.beginPath = function () {\n    this._context.beginPath();\n  };\n  Context.prototype.bezierCurveTo = function (a0, a1, a2, a3, a4, a5) {\n    this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n  };\n  Context.prototype.clearRect = function (a0, a1, a2, a3) {\n    this._context.clearRect(a0, a1, a2, a3);\n  };\n  Context.prototype.clip = function () {\n    this._context.clip();\n  };\n  Context.prototype.closePath = function () {\n    this._context.closePath();\n  };\n  Context.prototype.createImageData = function (a0, a1) {\n    var a = arguments;\n    if (a.length === 2) {\n      return this._context.createImageData(a0, a1);\n    } else if (a.length === 1) {\n      return this._context.createImageData(a0);\n    }\n  };\n  Context.prototype.createLinearGradient = function (a0, a1, a2, a3) {\n    return this._context.createLinearGradient(a0, a1, a2, a3);\n  };\n  Context.prototype.createPattern = function (a0, a1) {\n    return this._context.createPattern(a0, a1);\n  };\n  Context.prototype.createRadialGradient = function (a0, a1, a2, a3, a4, a5) {\n    return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n  };\n  Context.prototype.drawImage = function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n    var a = arguments,\n      _context = this._context;\n    if (a.length === 3) {\n      _context.drawImage(a0, a1, a2);\n    } else if (a.length === 5) {\n      _context.drawImage(a0, a1, a2, a3, a4);\n    } else if (a.length === 9) {\n      _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n    }\n  };\n  Context.prototype.ellipse = function (a0, a1, a2, a3, a4, a5, a6, a7) {\n    this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n  };\n  Context.prototype.isPointInPath = function (x, y) {\n    return this._context.isPointInPath(x, y);\n  };\n  Context.prototype.fill = function () {\n    this._context.fill();\n  };\n  Context.prototype.fillRect = function (x, y, width, height) {\n    this._context.fillRect(x, y, width, height);\n  };\n  Context.prototype.strokeRect = function (x, y, width, height) {\n    this._context.strokeRect(x, y, width, height);\n  };\n  Context.prototype.fillText = function (a0, a1, a2) {\n    this._context.fillText(a0, a1, a2);\n  };\n  Context.prototype.measureText = function (text) {\n    return this._context.measureText(text);\n  };\n  Context.prototype.getImageData = function (a0, a1, a2, a3) {\n    return this._context.getImageData(a0, a1, a2, a3);\n  };\n  Context.prototype.lineTo = function (a0, a1) {\n    this._context.lineTo(a0, a1);\n  };\n  Context.prototype.moveTo = function (a0, a1) {\n    this._context.moveTo(a0, a1);\n  };\n  Context.prototype.rect = function (a0, a1, a2, a3) {\n    this._context.rect(a0, a1, a2, a3);\n  };\n  Context.prototype.putImageData = function (a0, a1, a2) {\n    this._context.putImageData(a0, a1, a2);\n  };\n  Context.prototype.quadraticCurveTo = function (a0, a1, a2, a3) {\n    this._context.quadraticCurveTo(a0, a1, a2, a3);\n  };\n  Context.prototype.restore = function () {\n    this._context.restore();\n  };\n  Context.prototype.rotate = function (a0) {\n    this._context.rotate(a0);\n  };\n  Context.prototype.save = function () {\n    this._context.save();\n  };\n  Context.prototype.scale = function (a0, a1) {\n    this._context.scale(a0, a1);\n  };\n  Context.prototype.setLineDash = function (a0) {\n    if (this._context.setLineDash) {\n      this._context.setLineDash(a0);\n    } else if ('mozDash' in this._context) {\n      this._context['mozDash'] = a0;\n    } else if ('webkitLineDash' in this._context) {\n      this._context['webkitLineDash'] = a0;\n    }\n  };\n  Context.prototype.getLineDash = function () {\n    return this._context.getLineDash();\n  };\n  Context.prototype.setTransform = function (a0, a1, a2, a3, a4, a5) {\n    this._context.setTransform(a0, a1, a2, a3, a4, a5);\n  };\n  Context.prototype.stroke = function () {\n    this._context.stroke();\n  };\n  Context.prototype.strokeText = function (a0, a1, a2, a3) {\n    this._context.strokeText(a0, a1, a2, a3);\n  };\n  Context.prototype.transform = function (a0, a1, a2, a3, a4, a5) {\n    this._context.transform(a0, a1, a2, a3, a4, a5);\n  };\n  Context.prototype.translate = function (a0, a1) {\n    this._context.translate(a0, a1);\n  };\n  Context.prototype._enableTrace = function () {\n    var that = this,\n      len = CONTEXT_METHODS.length,\n      _simplifyArray = Util_1.Util._simplifyArray,\n      origSetter = this.setAttr,\n      n,\n      args;\n    var func = function (methodName) {\n      var origMethod = that[methodName],\n        ret;\n      that[methodName] = function () {\n        args = _simplifyArray(Array.prototype.slice.call(arguments, 0));\n        ret = origMethod.apply(that, arguments);\n        that._trace({\n          method: methodName,\n          args: args\n        });\n        return ret;\n      };\n    };\n    for (n = 0; n < len; n++) {\n      func(CONTEXT_METHODS[n]);\n    }\n    that.setAttr = function () {\n      origSetter.apply(that, arguments);\n      var prop = arguments[0];\n      var val = arguments[1];\n      if (prop === 'shadowOffsetX' || prop === 'shadowOffsetY' || prop === 'shadowBlur') {\n        val = val / this.canvas.getPixelRatio();\n      }\n      that._trace({\n        property: prop,\n        val: val\n      });\n    };\n  };\n  Context.prototype._applyGlobalCompositeOperation = function (node) {\n    var globalCompositeOperation = node.getGlobalCompositeOperation();\n    if (globalCompositeOperation !== 'source-over') {\n      this.setAttr('globalCompositeOperation', globalCompositeOperation);\n    }\n  };\n  return Context;\n}();\nexports.Context = Context;\nCONTEXT_PROPERTIES.forEach(function (prop) {\n  Object.defineProperty(Context.prototype, prop, {\n    get: function () {\n      return this._context[prop];\n    },\n    set: function (val) {\n      this._context[prop] = val;\n    }\n  });\n});\nvar SceneContext = function (_super) {\n  __extends(SceneContext, _super);\n  function SceneContext() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SceneContext.prototype._fillColor = function (shape) {\n    var fill = shape.fill();\n    this.setAttr('fillStyle', fill);\n    shape._fillFunc(this);\n  };\n  SceneContext.prototype._fillPattern = function (shape) {\n    var fillPatternX = shape.getFillPatternX(),\n      fillPatternY = shape.getFillPatternY(),\n      fillPatternRotation = Global_1.Konva.getAngle(shape.getFillPatternRotation()),\n      fillPatternOffsetX = shape.getFillPatternOffsetX(),\n      fillPatternOffsetY = shape.getFillPatternOffsetY(),\n      fillPatternScaleX = shape.getFillPatternScaleX(),\n      fillPatternScaleY = shape.getFillPatternScaleY();\n    if (fillPatternX || fillPatternY) {\n      this.translate(fillPatternX || 0, fillPatternY || 0);\n    }\n    if (fillPatternRotation) {\n      this.rotate(fillPatternRotation);\n    }\n    if (fillPatternScaleX || fillPatternScaleY) {}\n    if (fillPatternOffsetX || fillPatternOffsetY) {\n      this.translate(-1 * fillPatternOffsetX, -1 * fillPatternOffsetY);\n    }\n    this.setAttr('fillStyle', shape._getFillPattern());\n    shape._fillFunc(this);\n  };\n  SceneContext.prototype._fillLinearGradient = function (shape) {\n    var grd = shape._getLinearGradient();\n    if (grd) {\n      this.setAttr('fillStyle', grd);\n      shape._fillFunc(this);\n    }\n  };\n  SceneContext.prototype._fillRadialGradient = function (shape) {\n    var grd = shape._getRadialGradient();\n    if (grd) {\n      this.setAttr('fillStyle', grd);\n      shape._fillFunc(this);\n    }\n  };\n  SceneContext.prototype._fill = function (shape) {\n    var hasColor = shape.fill(),\n      fillPriority = shape.getFillPriority();\n    if (hasColor && fillPriority === 'color') {\n      this._fillColor(shape);\n      return;\n    }\n    var hasPattern = shape.getFillPatternImage();\n    if (hasPattern && fillPriority === 'pattern') {\n      this._fillPattern(shape);\n      return;\n    }\n    var hasLinearGradient = shape.getFillLinearGradientColorStops();\n    if (hasLinearGradient && fillPriority === 'linear-gradient') {\n      this._fillLinearGradient(shape);\n      return;\n    }\n    var hasRadialGradient = shape.getFillRadialGradientColorStops();\n    if (hasRadialGradient && fillPriority === 'radial-gradient') {\n      this._fillRadialGradient(shape);\n      return;\n    }\n    if (hasColor) {\n      this._fillColor(shape);\n    } else if (hasPattern) {\n      this._fillPattern(shape);\n    } else if (hasLinearGradient) {\n      this._fillLinearGradient(shape);\n    } else if (hasRadialGradient) {\n      this._fillRadialGradient(shape);\n    }\n  };\n  SceneContext.prototype._strokeLinearGradient = function (shape) {\n    var start = shape.getStrokeLinearGradientStartPoint(),\n      end = shape.getStrokeLinearGradientEndPoint(),\n      colorStops = shape.getStrokeLinearGradientColorStops(),\n      grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n    if (colorStops) {\n      for (var n = 0; n < colorStops.length; n += 2) {\n        grd.addColorStop(colorStops[n], colorStops[n + 1]);\n      }\n      this.setAttr('strokeStyle', grd);\n    }\n  };\n  SceneContext.prototype._stroke = function (shape) {\n    var dash = shape.dash(),\n      strokeScaleEnabled = shape.getStrokeScaleEnabled();\n    if (shape.hasStroke()) {\n      if (!strokeScaleEnabled) {\n        this.save();\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n      }\n      this._applyLineCap(shape);\n      if (dash && shape.dashEnabled()) {\n        this.setLineDash(dash);\n        this.setAttr('lineDashOffset', shape.dashOffset());\n      }\n      this.setAttr('lineWidth', shape.strokeWidth());\n      if (!shape.getShadowForStrokeEnabled()) {\n        this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n      }\n      var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n      if (hasLinearGradient) {\n        this._strokeLinearGradient(shape);\n      } else {\n        this.setAttr('strokeStyle', shape.stroke());\n      }\n      shape._strokeFunc(this);\n      if (!strokeScaleEnabled) {\n        this.restore();\n      }\n    }\n  };\n  SceneContext.prototype._applyShadow = function (shape) {\n    var util = Util_1.Util,\n      color = util.get(shape.getShadowRGBA(), 'black'),\n      blur = util.get(shape.getShadowBlur(), 5),\n      offset = util.get(shape.getShadowOffset(), {\n        x: 0,\n        y: 0\n      }),\n      scale = shape.getAbsoluteScale(),\n      ratio = this.canvas.getPixelRatio(),\n      scaleX = scale.x * ratio,\n      scaleY = scale.y * ratio;\n    this.setAttr('shadowColor', color);\n    this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n    this.setAttr('shadowOffsetX', offset.x * scaleX);\n    this.setAttr('shadowOffsetY', offset.y * scaleY);\n  };\n  return SceneContext;\n}(Context);\nexports.SceneContext = SceneContext;\nvar HitContext = function (_super) {\n  __extends(HitContext, _super);\n  function HitContext() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  HitContext.prototype._fill = function (shape) {\n    this.save();\n    this.setAttr('fillStyle', shape.colorKey);\n    shape._fillFuncHit(this);\n    this.restore();\n  };\n  HitContext.prototype.strokeShape = function (shape) {\n    if (shape.hasHitStroke()) {\n      this._stroke(shape);\n    }\n  };\n  HitContext.prototype._stroke = function (shape) {\n    if (shape.hasHitStroke()) {\n      var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n      if (!strokeScaleEnabled) {\n        this.save();\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n      }\n      this._applyLineCap(shape);\n      var hitStrokeWidth = shape.hitStrokeWidth();\n      var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n      this.setAttr('lineWidth', strokeWidth);\n      this.setAttr('strokeStyle', shape.colorKey);\n      shape._strokeFuncHit(this);\n      if (!strokeScaleEnabled) {\n        this.restore();\n      }\n    }\n  };\n  return HitContext;\n}(Context);\nexports.HitContext = HitContext;","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__","constructor","create","defineProperty","exports","value","HitContext","SceneContext","Context","Util_1","require","Global_1","COMMA","OPEN_PAREN","CLOSE_PAREN","OPEN_PAREN_BRACKET","CLOSE_BRACKET_PAREN","SEMICOLON","DOUBLE_PAREN","EQUALS","CONTEXT_METHODS","CONTEXT_PROPERTIES","traceArrMax","canvas","_context","_canvas","getContext","Konva","enableTrace","traceArr","_enableTrace","fillShape","shape","fillEnabled","_fill","strokeShape","hasStroke","_stroke","fillStrokeShape","attrs","fillAfterStrokeEnabled","getTrace","relaxed","len","length","str","n","trace","method","args","Util","_isArray","join","property","val","clearTrace","_trace","push","shift","reset","pixelRatio","getCanvas","getPixelRatio","setTransform","clear","bounds","clearRect","x","y","width","height","getWidth","getHeight","_applyLineCap","lineCap","getLineCap","setAttr","_applyOpacity","absOpacity","getAbsoluteOpacity","_applyLineJoin","lineJoin","attr","arc","a0","a1","a2","a3","a4","a5","arcTo","beginPath","bezierCurveTo","clip","closePath","createImageData","a","arguments","createLinearGradient","createPattern","createRadialGradient","drawImage","a6","a7","a8","ellipse","isPointInPath","fill","fillRect","strokeRect","fillText","measureText","text","getImageData","lineTo","moveTo","rect","putImageData","quadraticCurveTo","restore","rotate","save","scale","setLineDash","getLineDash","stroke","strokeText","transform","translate","that","_simplifyArray","origSetter","func","methodName","origMethod","ret","slice","apply","prop","_applyGlobalCompositeOperation","node","globalCompositeOperation","getGlobalCompositeOperation","forEach","get","set","_super","_fillColor","_fillFunc","_fillPattern","fillPatternX","getFillPatternX","fillPatternY","getFillPatternY","fillPatternRotation","getAngle","getFillPatternRotation","fillPatternOffsetX","getFillPatternOffsetX","fillPatternOffsetY","getFillPatternOffsetY","fillPatternScaleX","getFillPatternScaleX","fillPatternScaleY","getFillPatternScaleY","_getFillPattern","_fillLinearGradient","grd","_getLinearGradient","_fillRadialGradient","_getRadialGradient","hasColor","fillPriority","getFillPriority","hasPattern","getFillPatternImage","hasLinearGradient","getFillLinearGradientColorStops","hasRadialGradient","getFillRadialGradientColorStops","_strokeLinearGradient","start","getStrokeLinearGradientStartPoint","end","getStrokeLinearGradientEndPoint","colorStops","getStrokeLinearGradientColorStops","addColorStop","dash","strokeScaleEnabled","getStrokeScaleEnabled","dashEnabled","dashOffset","strokeWidth","getShadowForStrokeEnabled","_strokeFunc","_applyShadow","util","color","getShadowRGBA","blur","getShadowBlur","offset","getShadowOffset","getAbsoluteScale","ratio","scaleX","scaleY","Math","min","abs","colorKey","_fillFuncHit","hasHitStroke","hitStrokeWidth","_strokeFuncHit"],"sources":["/Users/UX201446/Documents/GitHub/konva/node_modules/konva/lib/Context.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HitContext = exports.SceneContext = exports.Context = void 0;\nvar Util_1 = require(\"./Util\");\nvar Global_1 = require(\"./Global\");\nvar COMMA = ',', OPEN_PAREN = '(', CLOSE_PAREN = ')', OPEN_PAREN_BRACKET = '([', CLOSE_BRACKET_PAREN = '])', SEMICOLON = ';', DOUBLE_PAREN = '()', EQUALS = '=', CONTEXT_METHODS = [\n    'arc',\n    'arcTo',\n    'beginPath',\n    'bezierCurveTo',\n    'clearRect',\n    'clip',\n    'closePath',\n    'createLinearGradient',\n    'createPattern',\n    'createRadialGradient',\n    'drawImage',\n    'ellipse',\n    'fill',\n    'fillText',\n    'getImageData',\n    'createImageData',\n    'lineTo',\n    'moveTo',\n    'putImageData',\n    'quadraticCurveTo',\n    'rect',\n    'restore',\n    'rotate',\n    'save',\n    'scale',\n    'setLineDash',\n    'setTransform',\n    'stroke',\n    'strokeText',\n    'transform',\n    'translate',\n];\nvar CONTEXT_PROPERTIES = [\n    'fillStyle',\n    'strokeStyle',\n    'shadowColor',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'lineCap',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'font',\n    'textAlign',\n    'textBaseline',\n    'globalAlpha',\n    'globalCompositeOperation',\n    'imageSmoothingEnabled',\n];\nvar traceArrMax = 100;\nvar Context = (function () {\n    function Context(canvas) {\n        this.canvas = canvas;\n        this._context = canvas._canvas.getContext('2d');\n        if (Global_1.Konva.enableTrace) {\n            this.traceArr = [];\n            this._enableTrace();\n        }\n    }\n    Context.prototype.fillShape = function (shape) {\n        if (shape.fillEnabled()) {\n            this._fill(shape);\n        }\n    };\n    Context.prototype._fill = function (shape) {\n    };\n    Context.prototype.strokeShape = function (shape) {\n        if (shape.hasStroke()) {\n            this._stroke(shape);\n        }\n    };\n    Context.prototype._stroke = function (shape) {\n    };\n    Context.prototype.fillStrokeShape = function (shape) {\n        if (shape.attrs.fillAfterStrokeEnabled) {\n            this.strokeShape(shape);\n            this.fillShape(shape);\n        }\n        else {\n            this.fillShape(shape);\n            this.strokeShape(shape);\n        }\n    };\n    Context.prototype.getTrace = function (relaxed) {\n        var traceArr = this.traceArr, len = traceArr.length, str = '', n, trace, method, args;\n        for (n = 0; n < len; n++) {\n            trace = traceArr[n];\n            method = trace.method;\n            if (method) {\n                args = trace.args;\n                str += method;\n                if (relaxed) {\n                    str += DOUBLE_PAREN;\n                }\n                else {\n                    if (Util_1.Util._isArray(args[0])) {\n                        str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n                    }\n                    else {\n                        str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n                    }\n                }\n            }\n            else {\n                str += trace.property;\n                if (!relaxed) {\n                    str += EQUALS + trace.val;\n                }\n            }\n            str += SEMICOLON;\n        }\n        return str;\n    };\n    Context.prototype.clearTrace = function () {\n        this.traceArr = [];\n    };\n    Context.prototype._trace = function (str) {\n        var traceArr = this.traceArr, len;\n        traceArr.push(str);\n        len = traceArr.length;\n        if (len >= traceArrMax) {\n            traceArr.shift();\n        }\n    };\n    Context.prototype.reset = function () {\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n    };\n    Context.prototype.getCanvas = function () {\n        return this.canvas;\n    };\n    Context.prototype.clear = function (bounds) {\n        var canvas = this.getCanvas();\n        if (bounds) {\n            this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n        }\n        else {\n            this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n        }\n    };\n    Context.prototype._applyLineCap = function (shape) {\n        var lineCap = shape.getLineCap();\n        if (lineCap) {\n            this.setAttr('lineCap', lineCap);\n        }\n    };\n    Context.prototype._applyOpacity = function (shape) {\n        var absOpacity = shape.getAbsoluteOpacity();\n        if (absOpacity !== 1) {\n            this.setAttr('globalAlpha', absOpacity);\n        }\n    };\n    Context.prototype._applyLineJoin = function (shape) {\n        var lineJoin = shape.attrs.lineJoin;\n        if (lineJoin) {\n            this.setAttr('lineJoin', lineJoin);\n        }\n    };\n    Context.prototype.setAttr = function (attr, val) {\n        this._context[attr] = val;\n    };\n    Context.prototype.arc = function (a0, a1, a2, a3, a4, a5) {\n        this._context.arc(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.arcTo = function (a0, a1, a2, a3, a4) {\n        this._context.arcTo(a0, a1, a2, a3, a4);\n    };\n    Context.prototype.beginPath = function () {\n        this._context.beginPath();\n    };\n    Context.prototype.bezierCurveTo = function (a0, a1, a2, a3, a4, a5) {\n        this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.clearRect = function (a0, a1, a2, a3) {\n        this._context.clearRect(a0, a1, a2, a3);\n    };\n    Context.prototype.clip = function () {\n        this._context.clip();\n    };\n    Context.prototype.closePath = function () {\n        this._context.closePath();\n    };\n    Context.prototype.createImageData = function (a0, a1) {\n        var a = arguments;\n        if (a.length === 2) {\n            return this._context.createImageData(a0, a1);\n        }\n        else if (a.length === 1) {\n            return this._context.createImageData(a0);\n        }\n    };\n    Context.prototype.createLinearGradient = function (a0, a1, a2, a3) {\n        return this._context.createLinearGradient(a0, a1, a2, a3);\n    };\n    Context.prototype.createPattern = function (a0, a1) {\n        return this._context.createPattern(a0, a1);\n    };\n    Context.prototype.createRadialGradient = function (a0, a1, a2, a3, a4, a5) {\n        return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.drawImage = function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        var a = arguments, _context = this._context;\n        if (a.length === 3) {\n            _context.drawImage(a0, a1, a2);\n        }\n        else if (a.length === 5) {\n            _context.drawImage(a0, a1, a2, a3, a4);\n        }\n        else if (a.length === 9) {\n            _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n        }\n    };\n    Context.prototype.ellipse = function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n    };\n    Context.prototype.isPointInPath = function (x, y) {\n        return this._context.isPointInPath(x, y);\n    };\n    Context.prototype.fill = function () {\n        this._context.fill();\n    };\n    Context.prototype.fillRect = function (x, y, width, height) {\n        this._context.fillRect(x, y, width, height);\n    };\n    Context.prototype.strokeRect = function (x, y, width, height) {\n        this._context.strokeRect(x, y, width, height);\n    };\n    Context.prototype.fillText = function (a0, a1, a2) {\n        this._context.fillText(a0, a1, a2);\n    };\n    Context.prototype.measureText = function (text) {\n        return this._context.measureText(text);\n    };\n    Context.prototype.getImageData = function (a0, a1, a2, a3) {\n        return this._context.getImageData(a0, a1, a2, a3);\n    };\n    Context.prototype.lineTo = function (a0, a1) {\n        this._context.lineTo(a0, a1);\n    };\n    Context.prototype.moveTo = function (a0, a1) {\n        this._context.moveTo(a0, a1);\n    };\n    Context.prototype.rect = function (a0, a1, a2, a3) {\n        this._context.rect(a0, a1, a2, a3);\n    };\n    Context.prototype.putImageData = function (a0, a1, a2) {\n        this._context.putImageData(a0, a1, a2);\n    };\n    Context.prototype.quadraticCurveTo = function (a0, a1, a2, a3) {\n        this._context.quadraticCurveTo(a0, a1, a2, a3);\n    };\n    Context.prototype.restore = function () {\n        this._context.restore();\n    };\n    Context.prototype.rotate = function (a0) {\n        this._context.rotate(a0);\n    };\n    Context.prototype.save = function () {\n        this._context.save();\n    };\n    Context.prototype.scale = function (a0, a1) {\n        this._context.scale(a0, a1);\n    };\n    Context.prototype.setLineDash = function (a0) {\n        if (this._context.setLineDash) {\n            this._context.setLineDash(a0);\n        }\n        else if ('mozDash' in this._context) {\n            this._context['mozDash'] = a0;\n        }\n        else if ('webkitLineDash' in this._context) {\n            this._context['webkitLineDash'] = a0;\n        }\n    };\n    Context.prototype.getLineDash = function () {\n        return this._context.getLineDash();\n    };\n    Context.prototype.setTransform = function (a0, a1, a2, a3, a4, a5) {\n        this._context.setTransform(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.stroke = function () {\n        this._context.stroke();\n    };\n    Context.prototype.strokeText = function (a0, a1, a2, a3) {\n        this._context.strokeText(a0, a1, a2, a3);\n    };\n    Context.prototype.transform = function (a0, a1, a2, a3, a4, a5) {\n        this._context.transform(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.translate = function (a0, a1) {\n        this._context.translate(a0, a1);\n    };\n    Context.prototype._enableTrace = function () {\n        var that = this, len = CONTEXT_METHODS.length, _simplifyArray = Util_1.Util._simplifyArray, origSetter = this.setAttr, n, args;\n        var func = function (methodName) {\n            var origMethod = that[methodName], ret;\n            that[methodName] = function () {\n                args = _simplifyArray(Array.prototype.slice.call(arguments, 0));\n                ret = origMethod.apply(that, arguments);\n                that._trace({\n                    method: methodName,\n                    args: args,\n                });\n                return ret;\n            };\n        };\n        for (n = 0; n < len; n++) {\n            func(CONTEXT_METHODS[n]);\n        }\n        that.setAttr = function () {\n            origSetter.apply(that, arguments);\n            var prop = arguments[0];\n            var val = arguments[1];\n            if (prop === 'shadowOffsetX' ||\n                prop === 'shadowOffsetY' ||\n                prop === 'shadowBlur') {\n                val = val / this.canvas.getPixelRatio();\n            }\n            that._trace({\n                property: prop,\n                val: val,\n            });\n        };\n    };\n    Context.prototype._applyGlobalCompositeOperation = function (node) {\n        var globalCompositeOperation = node.getGlobalCompositeOperation();\n        if (globalCompositeOperation !== 'source-over') {\n            this.setAttr('globalCompositeOperation', globalCompositeOperation);\n        }\n    };\n    return Context;\n}());\nexports.Context = Context;\nCONTEXT_PROPERTIES.forEach(function (prop) {\n    Object.defineProperty(Context.prototype, prop, {\n        get: function () {\n            return this._context[prop];\n        },\n        set: function (val) {\n            this._context[prop] = val;\n        },\n    });\n});\nvar SceneContext = (function (_super) {\n    __extends(SceneContext, _super);\n    function SceneContext() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SceneContext.prototype._fillColor = function (shape) {\n        var fill = shape.fill();\n        this.setAttr('fillStyle', fill);\n        shape._fillFunc(this);\n    };\n    SceneContext.prototype._fillPattern = function (shape) {\n        var fillPatternX = shape.getFillPatternX(), fillPatternY = shape.getFillPatternY(), fillPatternRotation = Global_1.Konva.getAngle(shape.getFillPatternRotation()), fillPatternOffsetX = shape.getFillPatternOffsetX(), fillPatternOffsetY = shape.getFillPatternOffsetY(), fillPatternScaleX = shape.getFillPatternScaleX(), fillPatternScaleY = shape.getFillPatternScaleY();\n        if (fillPatternX || fillPatternY) {\n            this.translate(fillPatternX || 0, fillPatternY || 0);\n        }\n        if (fillPatternRotation) {\n            this.rotate(fillPatternRotation);\n        }\n        if (fillPatternScaleX || fillPatternScaleY) {\n        }\n        if (fillPatternOffsetX || fillPatternOffsetY) {\n            this.translate(-1 * fillPatternOffsetX, -1 * fillPatternOffsetY);\n        }\n        this.setAttr('fillStyle', shape._getFillPattern());\n        shape._fillFunc(this);\n    };\n    SceneContext.prototype._fillLinearGradient = function (shape) {\n        var grd = shape._getLinearGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    };\n    SceneContext.prototype._fillRadialGradient = function (shape) {\n        var grd = shape._getRadialGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    };\n    SceneContext.prototype._fill = function (shape) {\n        var hasColor = shape.fill(), fillPriority = shape.getFillPriority();\n        if (hasColor && fillPriority === 'color') {\n            this._fillColor(shape);\n            return;\n        }\n        var hasPattern = shape.getFillPatternImage();\n        if (hasPattern && fillPriority === 'pattern') {\n            this._fillPattern(shape);\n            return;\n        }\n        var hasLinearGradient = shape.getFillLinearGradientColorStops();\n        if (hasLinearGradient && fillPriority === 'linear-gradient') {\n            this._fillLinearGradient(shape);\n            return;\n        }\n        var hasRadialGradient = shape.getFillRadialGradientColorStops();\n        if (hasRadialGradient && fillPriority === 'radial-gradient') {\n            this._fillRadialGradient(shape);\n            return;\n        }\n        if (hasColor) {\n            this._fillColor(shape);\n        }\n        else if (hasPattern) {\n            this._fillPattern(shape);\n        }\n        else if (hasLinearGradient) {\n            this._fillLinearGradient(shape);\n        }\n        else if (hasRadialGradient) {\n            this._fillRadialGradient(shape);\n        }\n    };\n    SceneContext.prototype._strokeLinearGradient = function (shape) {\n        var start = shape.getStrokeLinearGradientStartPoint(), end = shape.getStrokeLinearGradientEndPoint(), colorStops = shape.getStrokeLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n        if (colorStops) {\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            this.setAttr('strokeStyle', grd);\n        }\n    };\n    SceneContext.prototype._stroke = function (shape) {\n        var dash = shape.dash(), strokeScaleEnabled = shape.getStrokeScaleEnabled();\n        if (shape.hasStroke()) {\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            if (dash && shape.dashEnabled()) {\n                this.setLineDash(dash);\n                this.setAttr('lineDashOffset', shape.dashOffset());\n            }\n            this.setAttr('lineWidth', shape.strokeWidth());\n            if (!shape.getShadowForStrokeEnabled()) {\n                this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n            }\n            var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n            if (hasLinearGradient) {\n                this._strokeLinearGradient(shape);\n            }\n            else {\n                this.setAttr('strokeStyle', shape.stroke());\n            }\n            shape._strokeFunc(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    };\n    SceneContext.prototype._applyShadow = function (shape) {\n        var util = Util_1.Util, color = util.get(shape.getShadowRGBA(), 'black'), blur = util.get(shape.getShadowBlur(), 5), offset = util.get(shape.getShadowOffset(), {\n            x: 0,\n            y: 0,\n        }), scale = shape.getAbsoluteScale(), ratio = this.canvas.getPixelRatio(), scaleX = scale.x * ratio, scaleY = scale.y * ratio;\n        this.setAttr('shadowColor', color);\n        this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n        this.setAttr('shadowOffsetX', offset.x * scaleX);\n        this.setAttr('shadowOffsetY', offset.y * scaleY);\n    };\n    return SceneContext;\n}(Context));\nexports.SceneContext = SceneContext;\nvar HitContext = (function (_super) {\n    __extends(HitContext, _super);\n    function HitContext() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HitContext.prototype._fill = function (shape) {\n        this.save();\n        this.setAttr('fillStyle', shape.colorKey);\n        shape._fillFuncHit(this);\n        this.restore();\n    };\n    HitContext.prototype.strokeShape = function (shape) {\n        if (shape.hasHitStroke()) {\n            this._stroke(shape);\n        }\n    };\n    HitContext.prototype._stroke = function (shape) {\n        if (shape.hasHitStroke()) {\n            var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            var hitStrokeWidth = shape.hitStrokeWidth();\n            var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n            this.setAttr('lineWidth', strokeWidth);\n            this.setAttr('strokeStyle', shape.colorKey);\n            shape._strokeFuncHit(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    };\n    return HitContext;\n}(Context));\nexports.HitContext = HitContext;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}